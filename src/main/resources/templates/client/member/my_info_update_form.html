<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="layout/cli_layout">

<th:block layout:fragment="content">

    <t-h1 ko="마이페이지" en="MY-INFO"></t-h1>

    <t-h2 ko="나의 정보 수정"></t-h2>

    <form th:id="updateView" method="POST">
        <div th:each="member, i : ${member}">
            <table class="table f14">
                <tr>
                    <th>아이디</th>
                    <td>
                        <input th:type="text" class="form-control-lg" th:name="memberId" th:value="${member.memberId}" readonly>
                    </td>
                </tr>
                <tr>
                    <th>이름</th>
                    <td><input th:type="text" class="form-control-lg" th:name="memberName" th:value="${member.memberName}" readonly></td>
                </tr>
                <tr>
                    <th>비밀번호</th>
                    <td>
                        <input th:type="password" class="form-control-lg" th:id="password" th:name="password" value="">
                    </td>
                </tr>
                <tr>
                    <th>비밀번호 확인</th>
                    <td>
                        <input th:type="password" class="form-control-lg" th:id="passwordChk" th:name="passwordChk" value="">
                    </td>
                </tr>
                <tr>
                    <th>전화번호</th>
                    <td><input th:type="text" class="form-control-lg" th:name="tel" th:value="${member.tel}"></td>
                </tr>
                <tr>
                    <th>회원등급</th>
                    <td>
                        <input th:type="hidden" class="form-control-lg" th:name="grade" th:value="${member.grade}" readonly>
                        <convert-c-code th:data="${member.grade}"></convert-c-code>
                    </td>
                </tr>
            </table>
            <div class="button__box mt20">
                <a onclick="javascript: history.back()" class="c-button">취소하기</a>
                <button type="button" onclick="callUpdate()" class="c-button">변경사항저장</button>
            </div>
        </div>
    </form>
<script>
    function callUpdate(){
        if($("#password").val() == "" || $("#passwordChk").val() == ""){
            alert("비밀번호를 입력해주세요!");
            return false;
        }else if($("#password").val() != $("#passwordChk").val()){
            alert("비밀번호를 확인해주세요!");
            return false;
        }else if ($("#password").val() == $("#passwordChk").val()){
            updateView.action="/cli/myInfoUpdate";
            updateView.submit();
        }
    }

</script>

</th:block>

</html>