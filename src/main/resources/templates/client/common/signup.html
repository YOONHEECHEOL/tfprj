<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" type="text/css" href="captcha.css">
    <title>Sign Up</title>
    <script src="js/jquery-3.6.0.min.js"></script>

    <!-- JS -->

</head>
<body>

<div class="main">
    <section class="signup">
        <div class="container">
            <div class="signup-content">
                <div class="signup-form">
                    <h2 class="form-title">회원가입</h2>
                    <form id="frm" action="SignUp" onsubmit="return formCheck()"
                          method="post">
                        <button type="button" id="checkId"
                                value="No" onclick="isIdCheck()" style="float:right;">중복체크
                        </button>
                        <div class="form-group">
                            <label>아이디</label>
                            <input type="text" name="member_id" id="member_id" required="required"/>
                        </div>
                        <div class="form-group">
                            <label>비밀번호</label>
                            <input type="password" name="password" id="password"/>
                        </div>
                        <div class="form-group">
                            <label>비밀번호 확인</label>
                            <input type="password" name="password1" id="password1"/>
                        </div>
                        <div class="form-group">
                            <label>이 름</label>
                            <input type="text" name="member_name" id="member_name"/>
                        </div>
                        <div class="form-group">
                            <label>연락처</label>
                            <input type="text" name="tel" id="tel"/>
                        </div>
                        <div class="form-group form-button">
                            <input type="submit" name="signup" id="signup"
                                   class="form-submit" value="회원가입"/>
                        </div>

                        <input type="text" id="capt" readonly="readonly">
                        <div id="refresh"><img src="refresh.png" width="50px" onclick="cap()"></div>

                        <input type="text" id="textinput">
                        <button onclick="validcap()">check</button>

                    </form>
                </div>
                <p class="mt-4">
                    이미 회원이신가요? <a href="login.html">로그인</a>
                </p>
            </div>
        </div>

    </section>
</body>
</html>
<script>
    function cap() {
        var alpha = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V'
            , 'W', 'X', 'Y', 'Z', '1', '2', '3', '4', '5', '6', '7', '8', '9', '0', 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v'
            , 'w', 'x', 'y', 'z'];

        var a = alpha[Math.floor(Math.random() * 62)];
        var b = alpha[Math.floor(Math.random() * 62)];
        var c = alpha[Math.floor(Math.random() * 62)];
        var d = alpha[Math.floor(Math.random() * 62)];
        var e = alpha[Math.floor(Math.random() * 62)];
        var f = alpha[Math.floor(Math.random() * 62)];

        var sum = a + b + c + d + e + f;

        document.getElementById("capt").value = sum;
    }

    function validcap() {
        var string1 = document.getElementById('capt').value;
        var string2 = document.getElementById('textinput').value;
        if (string1 == string2) {
            alert("두 문자가 일치합니다");
            return true;
        } else {
            alert("똑바로 보고 해라");
            return false;

        }
    }

</script>
<script type="text/javascript">
    function isIdCheck() {
        $.ajax({
            url: "",
            type: "post",
            data: {
                "str": $('#member_id').val()
            },
            dataType: "text",
            success: function (result) {
                if (result == '1') {
                    alert("사용 가능한 아이디입니다.");
                    $("#checkId").attr("disabled", "disabled");
                    $("#checkId").val('Yes');
                    $("#memberPassword").focus();
                } else {
                    alert("사용 불가능한 아이디입니다.");
                    $("#member_id").val('');
                    $("#member_id").focus();
                }
                ;
            }
        });
    }

    function formCheck() {
        if ($("#checkId").val() != 'Yes') {
            alert("아이디 중복체크를 해주세요.");
            return false;
        }

        if ($("#password").val() != $("#password1").val()) {
            alert("패스워드가 일치하지 않습니다.")
            $("#password").val('');
            $("#password1").val('');
            $("#password").focus();
            return false;
        }

        return true;
    }
</script>

