<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.yedam.tfprj.admin.worker.mapper.WorkerMapper">
    <select id="getWorkerList" resultType="com.yedam.tfprj.admin.worker.service.WorkerVO">
        select worker_id,
               staff_status_cd,
               worker_name,
               profile_pic,
               phone_no,
               birth,
               military_cd,
               address,
               memo,
               startday,
               position_cd,
               late,
               absence,
               usertype,
               to_char(going_time, 'HH24:mi'),
               to_char(quitting_time, 'hh24:mi')
        from staff_information
        WHERE staff_Status_Cd = 0
    </select>

    <select id="getWorkerListStaffCd1" resultType="com.yedam.tfprj.admin.worker.service.WorkerVO">
        select worker_id,
               staff_status_cd,
               worker_name,
               profile_pic,
               phone_no,
               birth,
               military_cd,
               address,
               memo,
               startday,
               position_cd,
               late,
               absence,
               usertype,
               to_char(going_time, 'HH24:mi'),
               to_char(quitting_time, 'hh24:mi')
        from staff_information
        WHERE staff_Status_Cd = 1
    </select>

    <select id="getWorker" resultType="com.yedam.tfprj.admin.worker.service.WorkerVO">
        select * from staff_information
        where worker_id = #{workerId}
    </select>

    <update id="staffStatusCdUpdate">
        UPDATE staff_information SET staff_status_cd = #{staffStatusCd}
        WHERE worker_id = #{workerId}
    </update>

    <update id="workerDetailUpdate">
        UPDATE staff_information
        <set>
            <if test="phoneNo != null and phoneNo != ''">
                phone_No = #{phoneNo},
            </if>
                gender = #{gender},
                military_cd = #{militaryCd},
            <if test="postcode != ''">
                postcode = #{postcode},
                roadAddress = #{roadAddress},
                detailAddress = #{detailAddress},
                jibunAddress = #{jibunAddress},
            </if>
            <if test="memo != null and memo != ''">
                memo = #{memo}
            </if>

        </set>
        where worker_id = #{workerId}
    </update>
</mapper>

